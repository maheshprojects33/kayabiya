{% extends 'base/base.html' %}
{% load static %}
{% block content %}
  <div>
    {% include 'base/error_messages.html' %}
    <!-- To Display Messages If Any -->
  </div>
  {% if user.is_staff or user.managed_community.exists %}
    <div class="container">
      <div class="page-inner">
        <div class="row">
          <div class="col-md-12">
            <div class="card">
              <div class="card-header">
                <h4 class="card-title">User Account For Online Login</h4>
              </div>
              <div class="card-body">
                <div class="table-responsive">
                  <table id="multi-filter-select" class="display table table-hover">
                    <thead>
                      <tr>
                        <th>Username</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Last Login Date</th>
                        <th>Is Admin</th>
                        <th>Action</th>
                      </tr>
                    </thead>
                    
                    <tbody>
                      {% for user in users %}
                        <tr>
                          <td>{{ user.username }}</td>
                          <td>{{ user.first_name|title }}</td>
                          <td>{{ user.last_name|title }}</td>
                          <td>{{ user.last_login }}</td>
                          <td>{{ user.is_staff }}</td>
                          <td>
                            <a href="{% url 'update_user' user.pk %}" class="btn btn-icon btn-round btn-info btn-xs" data-bs-toggle="tooltip" title="Edit User"><i class="fa fa-user-edit"></i></a>
                            &nbsp;|&nbsp;
                            <a href="{% url 'reset_password' user.pk %}" class="btn btn-icon btn-round btn-warning btn-xs" data-bs-toggle="tooltip" title="Reset Password"><i class="fas fa-key"></i></a>
                            &nbsp;|&nbsp;
                            <a href="{% url 'delete_user' user.pk %}" class="btn btn-icon btn-round btn-xs btn-danger" data-bs-toggle="tooltip" title="Delete User"><i class="fas fa-trash-alt"></i></a>
                          </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Floating Button -->
    <div class="fixed-action-btn btn-outline-link">
      <a href="{% url 'register' %}" class="btn-floating btn-icon-prepend" title="Create New Account"><i class="fas fa-plus-circle"></i></a>
    </div>
  {% else %}
    <h1>You Are Smart Enough To View This Page</h1>
  {% endif %}
{% endblock %}
